{
  "beadId": "bd-iyk",
  "prdName": "visual-zoom-timeline",
  "tasks": [
    {
      "id": "backend-1",
      "title": "Add ZoomSegment data model",
      "category": "backend",
      "description": "Create ZoomSegment struct and add zoomSegments array to EffectsConfig.",
      "steps": ["Build app, no errors", "Verify EffectsConfig encodes/decodes zoomSegments"],
      "passes": true,
      "metadata": {
        "depends_on": [],
        "parallel": true,
        "conflicts_with": [],
        "files": ["Frame/Models/Project.swift"]
      }
    },
    {
      "id": "ui-1",
      "title": "Render zoom blocks on timeline",
      "category": "ui",
      "description": "Add purple zoom block visualization to TimelineView with proper positioning.",
      "steps": [
        "Load video with zooms, verify blocks visible",
        "Verify blocks positioned correctly by time",
        "Verify disabled zooms at 40% opacity"
      ],
      "passes": true,
      "metadata": {
        "depends_on": ["Add ZoomSegment data model"],
        "parallel": false,
        "conflicts_with": [],
        "files": ["Frame/Views/Editor/TimelineView.swift"]
      }
    },
    {
      "id": "interaction-1",
      "title": "Add zoom interactions",
      "category": "interaction",
      "description": "Implement click-to-add, drag-to-resize, right-click menu for zoom blocks.",
      "steps": [
        "Click timeline, new zoom added",
        "Drag edges, duration changes",
        "Right-click, menu appears",
        "Disable/Remove work correctly"
      ],
      "passes": true,
      "metadata": {
        "depends_on": ["Render zoom blocks on timeline"],
        "parallel": false,
        "conflicts_with": [],
        "files": ["Frame/Views/Editor/TimelineView.swift"]
      }
    },
    {
      "id": "ui-2",
      "title": "Update Zoom Inspector",
      "category": "ui",
      "description": "Add zoom list to ZoomInspector with enable/disable toggles and delete buttons.",
      "steps": [
        "Open Zoom Inspector, see zoom list",
        "Toggle zoom enabled/disabled",
        "Delete button removes zoom"
      ],
      "passes": true,
      "metadata": {
        "depends_on": ["Add ZoomSegment data model"],
        "parallel": true,
        "conflicts_with": [],
        "files": ["Frame/Views/Editor/Inspector/ZoomInspector.swift"]
      }
    },
    {
      "id": "backend-2",
      "title": "Update ZoomEngine",
      "category": "backend",
      "description": "Modify ZoomEngine to use zoomSegments instead of just cursor events.",
      "steps": [
        "Play video, zooms trigger at correct times",
        "Manual and auto-zooms both work",
        "Smooth transitions maintained"
      ],
      "passes": true,
      "metadata": {
        "depends_on": ["Add ZoomSegment data model"],
        "parallel": false,
        "conflicts_with": [],
        "files": ["Frame/Effects/ZoomEngine.swift"]
      }
    }
  ],
  "context": {
    "patterns": [
      "Zoom Data: Currently stored as global settings in EffectsConfig. Need ZoomSegment struct with startTime, duration, scale, isEnabled, isAutoGenerated.",
      "Timeline: TimelineView.swift uses GeometryReader + ZStack. Zoom blocks layer between waveform and playhead.",
      "ZoomEngine: ZoomEngine.swift calculates zoom state from cursor events. Update to check zoomSegments first.",
      "Drag Gestures: Timeline already uses DragGesture for trim handles and scrubbing."
    ],
    "keyFiles": [
      "Frame/Models/Project.swift",
      "Frame/Views/Editor/TimelineView.swift",
      "Frame/Views/Editor/Inspector/ZoomInspector.swift",
      "Frame/Effects/ZoomEngine.swift"
    ],
    "nonGoals": [
      "Manual zoom area selection (rectangular region)",
      "Zoom keyframe animation curves",
      "Zoom presets/templates",
      "Multi-select zoom operations"
    ]
  },
  "beadMetadata": {
    "depends_on": [],
    "parallel": true,
    "conflicts_with": [],
    "blocks": [],
    "estimated_hours": 4
  }
}

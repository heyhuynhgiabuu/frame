# Beads PRD: Visual Zoom Timeline with Clickable Blocks

**Bead:** bd-iyk  
**Created:** 2026-02-10  
**Status:** Draft

## Bead Metadata

```yaml
depends_on: []
parallel: true
conflicts_with: []
blocks: []
estimated_hours: 4
```

---

## Problem Statement

### What problem are we solving?

Frame currently lacks visual zoom editing. Users cannot see where zooms occur in the timeline, cannot manually add/remove zooms, and cannot adjust zoom timing. Screen Studio provides a visual zoom timeline with purple blocks representing zoom segments - users can click to add, drag to resize, and right-click to remove. Without this, Frame's zoom feature feels incomplete and unprofessional.

### Why now?

Zoom editing is a core feature of Screen Studio's value proposition. The auto-zoom from cursor clicks works, but users need manual control for fine-tuning. This is the #1 missing feature preventing visual parity with Screen Studio.

### Who is affected?

- **Primary users:** Content creators who need precise zoom control
- **Secondary users:** Users who want to remove unwanted auto-zooms

---

## Scope

### In-Scope

- Visual zoom blocks on timeline (purple, Screen Studio-style)
- Click on timeline to add new zoom
- Drag edges to adjust zoom duration
- Right-click to disable/remove zoom
- Auto-zoom detection from cursor clicks displayed as blocks
- Zoom Inspector updates to show zoom list

### Out-of-Scope

- Manual zoom area selection (rectangular region)
- Zoom keyframe animation curves
- Zoom presets/templates
- Multi-select zoom operations

---

## Proposed Solution

### Overview

Add a visual zoom track to the timeline showing purple blocks for each zoom segment. Users can interact directly with blocks to add, resize, or remove zooms. The Zoom Inspector shows a list view of all zooms with controls.

### User Flow

1. User opens Editor and sees purple zoom blocks on timeline (auto-generated from clicks)
2. User clicks empty timeline area to add new zoom
3. User drags block edges to adjust duration
4. User right-clicks block to remove/disable
5. User sees updated zoom in preview canvas

---

## Requirements

### Functional Requirements

#### Zoom Block Visualization

**Scenarios:**

- **WHEN** video has zoom segments **THEN** purple blocks appear on timeline
- **WHEN** zoom is disabled **THEN** block shows at reduced opacity (40%)
- **WHEN** multiple zooms overlap **THEN** blocks stack vertically

#### Adding Zooms

**Scenarios:**

- **WHEN** user clicks empty timeline area **THEN** new zoom block created at that time
- **WHEN** new zoom added **THEN** it has default 2-second duration
- **WHEN** zoom added **THEN** zoom level uses current EffectsConfig.zoomScale

#### Editing Zooms

**Scenarios:**

- **WHEN** user drags block left edge **THEN** zoom start time changes
- **WHEN** user drags block right edge **THEN** zoom end time changes
- **WHEN** user drags block body **THEN** zoom moves in time (duration preserved)
- **WHEN** zoom duration < 0.5s **THEN** block shows minimum width for visibility

#### Removing Zooms

**Scenarios:**

- **WHEN** user right-clicks block **THEN** context menu shows (Disable, Remove)
- **WHEN** user selects Disable **THEN** zoom inactive but visible at 40% opacity
- **WHEN** user selects Remove **THEN** zoom deleted from timeline

### Non-Functional Requirements

- **Performance:** Timeline scrubbing remains 60fps with 50+ zoom blocks
- **Accessibility:** Blocks have minimum 44pt touch targets
- **Visual:** Purple color #A855F7 matches Screen Studio aesthetic

---

## Success Criteria

- [ ] Purple zoom blocks visible on timeline for existing zooms
  - Verify: Load video with auto-zooms, see purple blocks on timeline
- [ ] Click on timeline adds new zoom
  - Verify: Click empty area, new purple block appears
- [ ] Drag edges adjusts zoom duration
  - Verify: Drag block edge, zoom timing updates in preview
- [ ] Right-click shows disable/remove options
  - Verify: Right-click block, context menu appears
- [ ] Zoom Inspector lists all zooms
  - Verify: Open Zoom Inspector, see list of zoom segments
- [ ] Build passes with no errors
  - Verify: `xcodebuild -project apps/desktop-swift/Frame.xcodeproj -scheme Frame build`

---

## Technical Context

### Existing Patterns

- **Zoom Data:** Currently stored as global settings in `EffectsConfig`. Need `ZoomSegment` struct with startTime, duration, scale, isEnabled, isAutoGenerated.
- **Timeline:** `TimelineView.swift` uses GeometryReader + ZStack. Zoom blocks layer between waveform and playhead.
- **ZoomEngine:** `ZoomEngine.swift` calculates zoom state from cursor events. Update to check `zoomSegments` first.
- **Drag Gestures:** Timeline already uses DragGesture for trim handles and scrubbing.

### Key Files

- `Frame/Models/Project.swift` - Add ZoomSegment struct to EffectsConfig
- `Frame/Views/Editor/TimelineView.swift` - Add zoom block rendering and interactions
- `Frame/Views/Editor/Inspector/ZoomInspector.swift` - Add zoom list management
- `Frame/Effects/ZoomEngine.swift` - Update to use zoomSegments

### Affected Files

```yaml
files:
  - Frame/Models/Project.swift # ZoomSegment struct
  - Frame/Views/Editor/TimelineView.swift # Zoom blocks UI
  - Frame/Views/Editor/Inspector/ZoomInspector.swift # Zoom list
  - Frame/Effects/ZoomEngine.swift # Use segments
```

---

## Risks & Mitigations

| Risk                                 | Likelihood | Impact | Mitigation                                        |
| ------------------------------------ | ---------- | ------ | ------------------------------------------------- |
| Performance with many zooms          | Low        | High   | Use viewport clipping, only render visible blocks |
| Complex drag gesture conflicts       | Medium     | Medium | Careful gesture delegate coordination             |
| Data migration for existing projects | Low        | Low    | ZoomSegments defaults to empty array              |

---

## Tasks

### Add ZoomSegment data model [backend]

Create ZoomSegment struct and add zoomSegments array to EffectsConfig.

**Metadata:**

```yaml
depends_on: []
parallel: true
conflicts_with: []
files:
  - Frame/Models/Project.swift
```

**Verification:**

- Build app, no errors
- Verify EffectsConfig encodes/decodes zoomSegments

### Render zoom blocks on timeline [ui]

Add purple zoom block visualization to TimelineView with proper positioning.

**Metadata:**

```yaml
depends_on: ["Add ZoomSegment data model"]
parallel: false
conflicts_with: []
files:
  - Frame/Views/Editor/TimelineView.swift
```

**Verification:**

- Load video with zooms, verify blocks visible
- Verify blocks positioned correctly by time
- Verify disabled zooms at 40% opacity

### Add zoom interactions [interaction]

Implement click-to-add, drag-to-resize, right-click menu for zoom blocks.

**Metadata:**

```yaml
depends_on: ["Render zoom blocks on timeline"]
parallel: false
conflicts_with: []
files:
  - Frame/Views/Editor/TimelineView.swift
```

**Verification:**

- Click timeline, new zoom added
- Drag edges, duration changes
- Right-click, menu appears
- Disable/Remove work correctly

### Update Zoom Inspector [ui]

Add zoom list to ZoomInspector with enable/disable toggles and delete buttons.

**Metadata:**

```yaml
depends_on: ["Add ZoomSegment data model"]
parallel: true
conflicts_with: []
files:
  - Frame/Views/Editor/Inspector/ZoomInspector.swift
```

**Verification:**

- Open Zoom Inspector, see zoom list
- Toggle zoom enabled/disabled
- Delete button removes zoom

### Update ZoomEngine [backend]

Modify ZoomEngine to use zoomSegments instead of just cursor events.

**Metadata:**

```yaml
depends_on: ["Add ZoomSegment data model"]
parallel: false
conflicts_with: []
files:
  - Frame/Effects/ZoomEngine.swift
```

**Verification:**

- Play video, zooms trigger at correct times
- Manual and auto-zooms both work
- Smooth transitions maintained
